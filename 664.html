<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Guess the Sequence</title>
  <style>
    body { 
      font-family: Arial, sans-serif; 
      text-align: center; 
      background-color: #f3e5f5; /* sfondo leggermente viola */
    }
    /* Titolo ALVR con font particolare, corsivo, grassetto e viola */
    #logo { 
      font-size: 40px; 
      font-weight: bold; 
      font-style: italic; 
      color: purple; 
      margin-bottom: 20px; 
      font-family: 'Brush Script MT', cursive;
    }
    /* Bottoni dei colori: bianchi con bordo nero, senza scritta, con background impostato inline */
    .color-btn { 
      width: 100px; 
      height: 100px; 
      margin: 5px; 
      border: 3px solid black; 
      cursor: pointer; 
      border-radius: 12px; 
      transition: transform 0.2s; 
      background-color: white; 
    }
    .color-btn:hover { 
      transform: scale(1.1); 
    }
    /* Area per la sequenza scelta (cerchi con bordo nero) */
    #selected-sequence { 
      margin-top: 10px; 
      font-weight: bold; 
      display: flex; 
      justify-content: center; 
      gap: 10px; 
      align-items: center;
    }
    .color-circle { 
      width: 30px; 
      height: 30px; 
      border-radius: 50%; 
      border: 3px solid black; 
      display: inline-block; 
    }
    /* Bottoni azione: sfondo bianco, bordo nero, scritte viola */
    .action-btn { 
      font-size: 18px; 
      padding: 10px 20px; 
      margin: 10px; 
      border: 3px solid black; 
      border-radius: 8px; 
      cursor: pointer; 
      transition: background 0.3s, transform 0.2s; 
      color: purple; 
      background-color: white; 
      font-weight: bold; 
    }
    .action-btn:hover { 
      transform: scale(1.1); 
      background-color: lightgray; 
    }
    /* Stile per il menu a tendina con label */
    #language-container { 
      margin-bottom: 20px; 
      font-size: 18px; 
      font-weight: bold; 
      color: purple;
    }
  </style>
</head>
<body>
  <div id="logo">ALVR</div>
  <h1 id="title">Indovina la Sequenza</h1>
  <div id="language-container">
    <label id="language-label" for="language">Scegli la lingua:</label>
    <select id="language" onchange="updateLanguage()">
      <option value="1">Italiano</option>
      <option value="2">English</option>
    </select>
  </div>
  <p id="instructions">Seleziona 4 colori e prova a indovinare la sequenza segreta!</p>
  
  <!-- Bottoni dei colori con background inline -->
  <div>
    <button class="color-btn" onclick="selectColor('Rosso')" style="background-color: red;"></button>
    <button class="color-btn" onclick="selectColor('Giallo')" style="background-color: yellow;"></button>
    <button class="color-btn" onclick="selectColor('Verde')" style="background-color: green;"></button>
    <button class="color-btn" onclick="selectColor('Marrone Chiaro')" style="background-color: burlywood;"></button>
    <button class="color-btn" onclick="selectColor('Nero')" style="background-color: black;"></button>
    <button class="color-btn" onclick="selectColor('Bianco')" style="background-color: white;"></button>
  </div>
  
  <div id="selected-sequence-label">Sequenza scelta:</div>
  <div id="selected-sequence"></div>
  
  <button class="action-btn" onclick="submitGuess()" id="submit-btn">Tenta</button>
  <button class="action-btn" onclick="resetGame()" id="generate-btn">Genera Sequenza</button>
  <button class="action-btn" onclick="clearSelection()" id="clear-btn">Cancella</button>
  
  <p id="feedback"></p>
  
  <script>
    // Array dei colori per lingua: '1' = Italiano, '2' = English
    const colors = {
      '1': ['Rosso', 'Giallo', 'Verde', 'Marrone Chiaro', 'Nero', 'Bianco'],
      '2': ['Red', 'Yellow', 'Green', 'Light Brown', 'Black', 'White']
    };
    // Mappatura dei nomi dei colori ai codici CSS
    const colorCodes = {
      'Rosso': 'red',
      'Giallo': 'yellow',
      'Verde': 'green',
      'Marrone Chiaro': 'burlywood',
      'Nero': 'black',
      'Bianco': 'white',
      'Red': 'red',
      'Yellow': 'yellow',
      'Green': 'green',
      'Light Brown': 'burlywood',
      'Black': 'black',
      'White': 'white'
    };
    
    let secretSequence = [];
    let userSequence = [];
    let attempts = 0;
    let clearAttempts = 0;
    
    // Aggiorna la lingua e i testi della pagina in base alla selezione
    function updateLanguage() {
      const lang = document.getElementById("language").value;
      const languageLabel = document.getElementById("language-label");
      const title = document.getElementById("title");
      const instructions = document.getElementById("instructions");
      const submitBtn = document.getElementById("submit-btn");
      const generateBtn = document.getElementById("generate-btn");
      const clearBtn = document.getElementById("clear-btn");
      const selectedSeqLabel = document.getElementById("selected-sequence-label");
      
      if (lang === "1") {
        languageLabel.innerText = "Scegli la lingua:";
        title.innerText = "Indovina la Sequenza";
        instructions.innerText = "Seleziona 4 colori e prova a indovinare la sequenza segreta!";
        submitBtn.innerText = "Tenta";
        generateBtn.innerText = "Genera Sequenza";
        clearBtn.innerText = "Cancella";
        selectedSeqLabel.innerText = "Sequenza scelta:";
      } else {
        languageLabel.innerText = "Choose language:";
        title.innerText = "Guess the Sequence";
        instructions.innerText = "Select 4 colors and try to guess the secret sequence!";
        submitBtn.innerText = "Try";
        generateBtn.innerText = "Generate Sequence";
        clearBtn.innerText = "Delete";
        selectedSeqLabel.innerText = "Selected sequence:";
      }
      generateSecretSequence();
    }
    
    // Genera la sequenza segreta di 4 colori diversi (nessun duplicato)
    function generateSecretSequence() {
      const lang = document.getElementById("language").value;
      // Shuffle e prendi i primi 4 colori unici
      secretSequence = [...colors[lang]].sort(() => 0.5 - Math.random()).slice(0, 4);
      console.log("Secret sequence:", secretSequence);
    }
    
    // Aggiunge un colore alla selezione dell'utente
    function selectColor(color) {
      if (userSequence.length < 4) {
        userSequence.push(color);
        updateSelectedDisplay();
      }
    }
    
    // Aggiorna la visualizzazione della sequenza scelta come cerchi colorati
    function updateSelectedDisplay() {
      const container = document.getElementById("selected-sequence");
      container.innerHTML = "";
      userSequence.forEach(color => {
        const circle = document.createElement("div");
        circle.classList.add("color-circle");
        circle.style.backgroundColor = colorCodes[color];
        container.appendChild(circle);
      });
    }
    
    // Controlla se l'utente ha indovinato la sequenza
    function submitGuess() {
      if (userSequence.length !== 4) {
        alert(document.getElementById("language").value === "1" ? "Seleziona 4 colori prima di inviare!" : "Select 4 colors before submitting!");
        return;
      }
      attempts++;
      let correctPositions = userSequence.filter((color, index) => color === secretSequence[index]).length;
      const feedback = document.getElementById("feedback");
      if (correctPositions === 4) {
        feedback.innerText = document.getElementById("language").value === "1" ? "ðŸŽ‰ Complimenti! Hai indovinato la sequenza! ðŸŽ‰" : "ðŸŽ‰ Congratulations! You guessed the sequence! ðŸŽ‰";
      } else {
        feedback.innerText = document.getElementById("language").value === "1" ? 
          `Tentativo ${attempts}: ${correctPositions} colore/i nella posizione corretta.` : 
          `Attempt ${attempts}: ${correctPositions} color(s) in the correct position.`;
        if (attempts >= 6) {
          feedback.innerText += "\n" + (document.getElementById("language").value === "1" ? 
            `Game Over! La sequenza era: ${secretSequence.join(', ')}` : 
            `Game Over! The sequence was: ${secretSequence.join(', ')}`);
        }
      }
      userSequence = [];
      updateSelectedDisplay();
    }
    
    // Permette di cancellare la selezione corrente (massimo 2 volte)
    function clearSelection() {
      if (clearAttempts < 2) {
        userSequence = [];
        updateSelectedDisplay();
        clearAttempts++;
      } else {
        alert(document.getElementById("language").value === "1" ? "Hai raggiunto il limite massimo di cancellazioni!" : "You've reached the maximum number of deletions!");
      }
    }
    
    // Resetta il gioco
    function resetGame() {
      attempts = 0;
      clearAttempts = 0;
      generateSecretSequence();
      userSequence = [];
      updateSelectedDisplay();
      document.getElementById("feedback").innerText = "";
    }
    
    // Inizializza la sequenza segreta all'avvio
    generateSecretSequence();
  </script>
</body>
</html>
