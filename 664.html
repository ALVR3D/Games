<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Guess the Sequence</title>
  <style>
    body { 
      font-family: Arial, sans-serif; 
      text-align: center; 
      background-color: #f3e5f5; /* sfondo leggermente viola */
    }
    /* Titolo ALVR con font particolare, corsivo, grassetto e viola */
    #logo { 
      font-size: 40px; 
      font-weight: bold; 
      font-style: italic; 
      color: purple; 
      margin-bottom: 20px; 
      font-family: 'Brush Script MT', cursive;
    }
    /* Bottoni dei colori: bianchi con bordo nero, senza scritta, background impostato inline */
    .color-btn { 
      width: 100px; 
      height: 100px; 
      margin: 5px; 
      border: 3px solid black; 
      cursor: pointer; 
      border-radius: 12px; 
      transition: transform 0.2s; 
      background-color: white; 
    }
    .color-btn:hover { 
      transform: scale(1.1); 
    }
    /* Area per la sequenza scelta (cerchi con bordo nero) */
    #selected-sequence { 
      margin-top: 10px; 
      font-weight: bold; 
      display: flex; 
      justify-content: center; 
      gap: 10px; 
      align-items: center;
    }
    .color-circle { 
      width: 30px; 
      height: 30px; 
      border-radius: 50%; 
      border: 3px solid black; 
      display: inline-block; 
    }
    /* Bottoni azione: sfondo bianco, bordo nero, scritte viola */
    .action-btn { 
      font-size: 18px; 
      padding: 10px 20px; 
      margin: 10px; 
      border: 3px solid black; 
      border-radius: 8px; 
      cursor: pointer; 
      transition: background 0.3s, transform 0.2s; 
      color: purple; 
      background-color: white; 
      font-weight: bold; 
    }
    .action-btn:hover { 
      transform: scale(1.1); 
      background-color: lightgray; 
    }
    /* Stile per il menu a tendina con label */
    #language-container { 
      margin-bottom: 20px; 
      font-size: 18px; 
      font-weight: bold; 
      color: purple;
    }
    /* Storyline per i tentativi */
    #storyline {
      margin-top: 20px;
      font-size: 16px;
      color: purple;
      text-align: center;
      max-width: 600px;
      margin-left: auto;
      margin-right: auto;
    }
    #storyline div { margin-bottom: 10px; }
    
    /* Responsive per smartphone */
    @media (max-width: 600px) {
      .color-btn { width: 60px; height: 60px; margin: 3px; }
      .color-circle { width: 20px; height: 20px; border-width: 2px; }
      .action-btn { font-size: 14px; padding: 8px 15px; }
      #logo { font-size: 30px; }
    }
  </style>
</head>
<body>
  <div id="logo">ALVR</div>
  <h1 id="title">Indovina la Sequenza</h1>
  <div id="language-container">
    <label id="language-label" for="language">Scegli la lingua:</label>
    <select id="language" onchange="updateLanguage()">
      <option value="1">Italiano</option>
      <option value="2">English</option>
    </select>
  </div>
  <p id="instructions">Seleziona 4 colori e prova a indovinare la sequenza segreta!</p>
  
  <!-- Bottoni dei colori: viene usato sia onclick che ontouchstart -->
  <div>
    <button class="color-btn rosso" onclick="selectColor('Rosso')" ontouchstart="selectColor('Rosso')" style="background-color: red;"></button>
    <button class="color-btn giallo" onclick="selectColor('Giallo')" ontouchstart="selectColor('Giallo')" style="background-color: yellow;"></button>
    <button class="color-btn verde" onclick="selectColor('Verde')" ontouchstart="selectColor('Verde')" style="background-color: green;"></button>
    <button class="color-btn marrone" onclick="selectColor('Marrone Chiaro')" ontouchstart="selectColor('Marrone Chiaro')" style="background-color: burlywood;"></button>
    <button class="color-btn nero" onclick="selectColor('Nero')" ontouchstart="selectColor('Nero')" style="background-color: black;"></button>
    <button class="color-btn bianco" onclick="selectColor('Bianco')" ontouchstart="selectColor('Bianco')" style="background-color: white;"></button>
  </div>
  
  <div id="selected-sequence-label">Sequenza scelta:</div>
  <div id="selected-sequence"></div>
  
  <button class="action-btn" onclick="submitGuess()" id="submit-btn">Tenta</button>
  <button class="action-btn" onclick="resetGame()" id="generate-btn">Genera Sequenza</button>
  <button class="action-btn" onclick="clearSelection()" id="clear-btn">Cancella</button>
  
  <p id="feedback"></p>
  <div id="storyline"></div>
  
  <script>
    // Array dei colori per lingua: '1' = Italiano, '2' = English
    const colors = {
      '1': ['Rosso', 'Giallo', 'Verde', 'Marrone Chiaro', 'Nero', 'Bianco'],
      '2': ['Red', 'Yellow', 'Green', 'Light Brown', 'Black', 'White']
    };
    // Mappatura dei nomi dei colori ai codici CSS
    const colorCodes = {
      'Rosso': 'red',
      'Giallo': 'yellow',
      'Verde': 'green',
      'Marrone Chiaro': 'burlywood',
      'Nero': 'black',
      'Bianco': 'white',
      'Red': 'red',
      'Yellow': 'yellow',
      'Green': 'green',
      'Light Brown': 'burlywood',
      'Black': 'black',
      'White': 'white'
    };
    
    let secretSequence = [];
    let userSequence = [];
    let attempts = 0;
    let clearAttempts = 0;
    let lastColorSelectTime = 0; // Prevent duplicate selections
    
    function updateLanguage() {
      const lang = document.getElementById("language").value;
      const languageLabel = document.getElementById("language-label");
      const title = document.getElementById("title");
      const instructions = document.getElementById("instructions");
      const submitBtn = document.getElementById("submit-btn");
      const generateBtn = document.getElementById("generate-btn");
      const clearBtn = document.getElementById("clear-btn");
      const selectedSeqLabel = document.getElementById("selected-sequence-label");
      
      if (lang === "1") {
        languageLabel.innerText = "Scegli la lingua:";
        title.innerText = "Indovina la Sequenza";
        instructions.innerText = "Seleziona 4 colori e prova a indovinare la sequenza segreta!";
        submitBtn.innerText = "Tenta";
        generateBtn.innerText = "Genera Sequenza";
        clearBtn.innerText = "Cancella";
        
